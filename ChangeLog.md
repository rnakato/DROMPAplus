# Changelog

## 1.20.0 (2024-8-25)
- Fixed a bug that causes a memory error when the input file has long reads (>200 bp).
- Changed Makefile and CMakeLists.txt to enable DEBUG mode.

## 1.19.0 (2024-6-27)
- drompa+: added `--nbin4lmd` option to specify the number of bins for the calculation of p_internal with local Poisson.

## 1.18.2 (2024-03-06)
- Added the ideogram file for the T2T genome.
- Added the mptable files for the T2T genome.

## 1.18.1 (2023-12-31)
- Bug fix when applying a large value to `--maxins`.

## 1.18.0 (2023-07-05)
- Add `--include_allchr` option to avoid an error if the chromosomes in the genome_table file do not begin with "chr" (see https://github.com/rnakato/DROMPAplus/issues/8).

## 1.17.2 (2023-07-04)
- Add genometable files for various genome build in `data/genometable`

## 1.17.1 (2023-02-19)
- drompa+: Suppress the warning message "Warning: chrN has no gene." if the gene annotation file has no genes in the specified chromosome.

## 1.17.0 (2022-11-24)
- drompa+: Add `--smoothingtype` option to allow the average normalization, which is consistent with that of DROMPA3.

## 1.16.1 (2022-10-11)
- drompa+ PROFILE: change ymin value for `--ptype 2` option

## 1.16.0 (2022-10-01)
- Bug fix in PROFILE `--ptype 2` option (divide gene into 100 subregions): skip genes if the extended length exceeds the chromosome length
- Change the y-axis for `--ptype 2` `--stype 1` (ChIP/Input enrichment) from log scale to linear scale

## 1.15.4 (2022-09-28)
- Bug fix: remove ARS information from SGD features which are old.

## 1.15.3 (2022-08-25)
- Add "gpos33" and "gpos66" to the ideogram stain annotation.

## 1.15.2 (2022-08-05)
- Bug fix: remove "peak coverage" header from stats file when calculating FRiP score.
- Modify `otherbins/parsestats4DROMPAplus.pl` to output FRiP score always.

## 1.15.1 (2022-07-27)
- Add error messages when the format of supplied genometable/mptable files is wrong.
- Add error message when specified BED files are missing.

## 1.15.0 (2022-06-28)
- drompa+: Bug fix of not highlighting peak regions when specifying the peak list in `-i` option

## 1.14.1 (2022-05-10)
- parse2wig+: fixed the error when O. sativa genome is applied ("chrN" -> "ChrN")

## 1.14.0 (2022-04-20)
- parse2wig+: remove `--allchr` option. Now parse2wig+ always considers all chromosomes to estimate fragment length

## 1.13.0 (2022-04-10)
- parse2wig+: fixed the bug that the FRiP score always becomes zero

## 1.12.2 (2022-04-09)
- parse2wig+: bug fix in the error when the F3 length (read length) is too short (e.g., sequence stripped bam)

## 1.12.1 (2021-10-14)
- drompa+ PROFILE: bug fix for counting sites
- drompa+ PROFILE: include genes <1kbp long (before they were omitted)

## 1.12.0 (2021-10-13)
- drompa+ PROFILE: add `--fixedlengthfromgene` for `--ptype 2` to use fixed length for outside of gene body

## 1.11.2 (2021-09-02)
parse2wig+: Bug fix to avoid overflow when a big constant value is supplied to --nrpm

## 1.11.1 (2021-08-29)
drompa+: Bug fix in getmax function ("Error: Invalid i for WigArray")

## 1.11.0 (2021-07-31)
- drompa+: Tuning the thining approach for read visualization (random -> max(abs(value)) for each windows)

## 1.10.1 (2021-07-08)
- drompa+: Modify the width for calculating p-inter (100kbp -> 1k bins)

## 1.10.0 (2021-06-17)
- drompa+: Modify to allow bedGraph/bigWig files with variable step.
- drompa+: Bug fix when a single sample is specified multiple times with different binsize (5th string in `-i`)
- parse2wig+: Bug fix when parsing a SAM/BAM file mapped on a single fasta.
- Add "genometable.mm9.txt" in "data" folder.

## 1.9.1 (2021-06-15)
- drompa+: Bug fix when the smoothing width is larger than the array size.

## 1.9.0 (2021-05-18)
- drompa+: Add an error message when specifying a chromosome name by `--chr` that is not in the genometable file.

## 1.8.9 (2021-05-08)
- drompa+: Bug fix for x memories when specifying a large value to `--ls`
- fixed typo

## 1.8.8 (2021-02-25)
- drompa+: Bug fix that the y-axis of read distribution boxes becomes too bold when applying large binsize
- drompa+: Accept color information in BED12 file
- drompa+: Add `--offbedname` option to omit bed name

## 1.8.7 (2021-02-20)
- drompa+: Allow BEDPE format for `--inter` option

## 1.8.6 (2021-02-13)
- drompa+: Bug fix in reading bedGraph files generated by other tools
- drompa+: Change label (from full path to basename) when it is not explicitly specified
- drompa+: Add error message when supplying invalid bedGraph file
- Update email address

## 1.8.5 (2021-02-04)
- drompa+: Modify parseGTF to allow gene id having transcript_id only

## 1.8.4 (2021-01-15)
- drompa+: Add an error message when specifying an illegal BED file for -r option

## 1.8.3 (2020-11-14)
- Bug fix: Gene annotation label for Ensembl data
- Remove printRefFlat function

## 1.8.2 (2020-10-06)
- Bug fix: switch boost::bind to std::bind to avoid complilation error depend on the version of a compiler

## 1.8.1 (2020-06-18)
- BED-formatted peak file is also generated in addition to TSV-formatted one

## 1.8.0 (2020-06-15)
- drompa+: change default value of `--norm` option to 0 (not normalize)
- Add `--ipm` threshold in peak calling (ChIP only)
- bug fix in peakcall (scaling factor between ChIP and Input was not reflected)

## 1.7.3 (2020-06-15)
- PROFILE: bug fix in `--ptype 3` that the header of .tsv file are not outputted
- PROFILE: add "ylim" option in R script generated

## 1.7.2 (2020-05-28)
- Modify output filename of PROFILE and MULTICI
- MULTICI: add `--getmaxposi` option to output the max bin value for each site instead of averaged bin value
- MULTICI: add `--addname` option to output peakname
- Add `--bed12` option to depict BED12 format (mainly for ChromHMM output)
- PROFILE: remove `--ntype` option
- parse2wig+: add `--onlyreadregion` option for paired-end RNA-seq

## 1.7.1 (2020-05-26)
- Bug fix in peak-calling (overflow of p_enrich)
- Add script change_chrname_[to|from]_Greek.pl in scripts directory

## 1.7.0 (2020-05-26)
- Adopt CMake to compile

## 1.6.1 (2020-05-25)
- Bug fix: basename(label) of filename in peak-calling
- Switch from <int32_t> to <double> for y-axis bins in pdf

## 1.6.0 (2020-05-21)
- Adopt htslib API for parsing SAM/BAM/CRAM format
- Now available to use on Mac
- Parse2wig+: Add --allchr option that uses all chromosomes to estimate fragment length

## 1.5.0 (2020-05-12)
- Add GENWIG command to generate wig data of ChIP/Input enrichment and p-value distributions
- Add MULTICI command to generate matrix of averaged read density in specified BED sites

## 1.4.1 (2020-04-23)
- Add parsestats4DROMPAplus.pl in scripts directory

## 1.4.0 (2020-03-12)
- Draft the manual page (http://drompaplus.readthedocs.io/)
- Add drompa.heatmap.py for heatmap visualization in otherbins directory
- Add sample scripts and related annotation data in tutorial directory
- Add data/geneannotation directory and add Ensembl gene annotations
- Add parsestats4DROMPAplus.pl and makemappabilitytable.pl in otherbins directory
- Add scripts link in the root directory
- Add symbolic link to cpdf binary file in otherbins/
- Add --shownegative option
- Add --offpdf option
- Set default threshold values for peak calling in each mode
- Add function for highlighting peak regions
- Move the source files from submodule/SSP/common to src
- PROFILE: Bug fix in --stype 2
- Bug fix in ARS visualiztion for yeast
- Bug fix in --showratio 2 (logratio)
- Remove --showars option

## 1.3.2 (2020-02-14)
- Bug fix in --inter for Mango file
- Bug fix in --ideogram

## 1.3.1 (2019-08-22)
- Update submodule SSP

## 1.3.0 (2019-08-18)
- add "data" directory that contains genometable, mptable and ideograms
- add --ideogram option

## 1.2.0 (2019-08-03)
- Parse2wig+: modify --outputzero option from int to bool
- Parse2wig+: add --verbose option. "*.ReadLengthDist.tsv" and "*.ReadCountDist.tsv" are output only when supplying --verbose option.
- DROMPA+: withdraw CI, CG, TR, HEATMAP commands
- DROMPA+: add --width_page and --width_draw options
- DROMPA+: add --chipdrop option to visualize ChIPDrop data
- DROMPA+: allow not to specify --input (-i) option.
- add `tutorial` directory
- modify help messages

## 1.1.3 (2019-04-15)
- Parse2wig+: Accept CRAM format for the input file
- src/SSP/script/makegenometable.pl: accept scaffold in Ensembl genome

## 1.1.2 (2018-08-29)
- bug fix for pdf page count

## 1.1.1 (2018-08-24)
- modify PROFILE command for bedsites

## 1.1.0 (2018-07-22)
- remove ZINB estimation for peak-calling
- change bindist.csv to readcountdist.tsv
- change to use the longest chromosome only for estimating fragment length in default

## 1.0.0
- First commit
